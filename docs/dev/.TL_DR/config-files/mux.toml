# rmcp-mux Configuration Template
# Location: ~/.rmcp-servers/config/mux.toml
#
# ARCHITECTURE: Single rmcp-mux process manages ALL servers defined here.
# Start with: rmcp-mux --config ~/.rmcp-servers/config/mux.toml
#             or: make mux-start
#
# IMPORTANT: Replace /Users/YOURUSER with your actual home path!
# The ~ shorthand works for socket paths but NOT for cmd paths.
#
# =============================================================================
# PARAMETER REFERENCE
# =============================================================================
#
# socket              - Unix socket path (required, supports ~)
# cmd                 - Command to run (required)
# args                - Command arguments (default: [])
# env                 - Environment variables (default: {})
# max_active_clients  - Max concurrent clients (default: 5)
# lazy_start          - Start on first request vs immediately (default: false)
#                       false = eager, starts with daemon
#                       true  = lazy, spawns on first connection
# heartbeat_enabled   - Enable health check pings (default: true)
#                       Set to false for servers that don't implement MCP ping
# tray                - Show in system tray (default: false)
#
# =============================================================================
# Core Servers (eager start - always running)
# =============================================================================

[servers.loctree]
socket = "~/.rmcp-servers/sockets/loctree.sock"
cmd = "/Users/YOURUSER/.cargo/bin/loctree-mcp"
args = []
env = {}
max_active_clients = 5
lazy_start = false
tray = false
heartbeat_enabled = false  # loctree-mcp doesn't implement MCP ping yet

[servers.rmcp-memex]
socket = "~/.rmcp-servers/sockets/rmcp-memex.sock"
cmd = "/Users/YOURUSER/.cargo/bin/rmcp_memex"
args = [
    "serve",
    "--config", "/Users/YOURUSER/.rmcp-servers/rmcp_memex/config.toml",
    "--db-path", "/Users/YOURUSER/.ai-memories/lancedb",
    "--log-level", "info"
]
env = { SLED_PATH = "/Users/YOURUSER/.rmcp-servers/sled/memex" }
max_active_clients = 5
lazy_start = false
tray = false
heartbeat_enabled = false  # rmcp_memex doesn't implement MCP ping yet

# =============================================================================
# Utility Servers (lazy start - spawn on first request)
# =============================================================================

[servers.brave-search]
socket = "~/.rmcp-servers/sockets/brave-search.sock"
cmd = "npx"
args = ["-y", "@brave/brave-search-mcp-server"]
env = { BRAVE_API_KEY = "YOUR_BRAVE_API_KEY_HERE" }
max_active_clients = 3
lazy_start = true
heartbeat_enabled = false  # NPX servers don't implement MCP ping

[servers.sequential-thinking]
socket = "~/.rmcp-servers/sockets/sequential-thinking.sock"
cmd = "npx"
args = ["-y", "@modelcontextprotocol/server-sequential-thinking"]
env = {}
max_active_clients = 3
lazy_start = true
heartbeat_enabled = false

[servers.youtube-transcript]
socket = "~/.rmcp-servers/sockets/youtube-transcript.sock"
cmd = "npx"
args = ["-y", "@kazuph/mcp-youtube"]
env = {}
max_active_clients = 3
lazy_start = true
heartbeat_enabled = false

# =============================================================================
# Optional Servers (uncomment if needed)
# =============================================================================

# [servers.github]
# socket = "~/.rmcp-servers/sockets/github.sock"
# cmd = "npx"
# args = ["-y", "@modelcontextprotocol/server-github"]
# env = { GITHUB_PERSONAL_ACCESS_TOKEN = "YOUR_GITHUB_TOKEN_HERE" }
# max_active_clients = 3
# lazy_start = true
# heartbeat_enabled = false

# [servers.memory]
# socket = "~/.rmcp-servers/sockets/memory.sock"
# cmd = "npx"
# args = ["-y", "@modelcontextprotocol/server-memory"]
# env = { MEMORY_FILE_PATH = "/Users/YOURUSER/AI_memory/memory.json" }
# max_active_clients = 3
# lazy_start = true
# heartbeat_enabled = false

# [servers.curl]
# socket = "~/.rmcp-servers/sockets/curl.sock"
# cmd = "npx"
# args = ["-y", "@mcp-get-community/server-curl"]
# env = {}
# max_active_clients = 3
# lazy_start = true
# heartbeat_enabled = false

# =============================================================================
# CLI Usage Examples
# =============================================================================
#
# Start all servers:
#   rmcp-mux --config ~/.rmcp-servers/config/mux.toml
#   make mux-start
#
# Check status:
#   rmcp-mux daemon-status          # Query running daemon
#   rmcp-mux daemon-status --json   # JSON output
#   make mux-status
#
# Start only specific servers:
#   rmcp-mux --config mux.toml --only loctree,rmcp-memex
#
# Start all except some:
#   rmcp-mux --config mux.toml --except youtube-transcript
#
# Restart single service:
#   rmcp-mux --restart-service memex --config mux.toml
#
# TUI dashboard:
#   make mux-tui
